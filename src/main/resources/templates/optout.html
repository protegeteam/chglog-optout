<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>WebPotégé Dataset Opt-out</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="shortcut icon" type="image/x-icon" href="https://webprotege.stanford.edu/favicon.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/css/bootstrap.min.css"
          integrity="sha384-PDle/QlgIONtM1aqA2Qemk5gPOE7wFq8+Em+G/hmo5Iq0CCmYZLv3fVRDJ4MMwEA" crossorigin="anonymous">

    <style>
        label {
            font-weight: bold;
        }
    </style>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script>
        function selectAll() {
            $('[data-include]').prop("checked", true);
        }

        function selectNone() {
            $('[data-exclude]').prop("checked", true);
        }
    </script>

</head>
<body class="container">

<h1>WebProtege De-identified Obfuscated Change History Log Publication Opt-Out</h1>

<p>
    This page allows you to opt out of the publication of the de-identified and obfuscated change logs for some or all of
    the WebProtégé projects that you own. <strong>You must press the "Save My Inclusion/Exclusion Preferences" button at
    the
    bottom
    of the page when you're done for your changes to take effect</strong>.
</p>

<form class="form-vertical" method="post" action="#" th:action="@{/optout}" th:object="${optOutInfo}">


    <input type="hidden" th:field="*{id}"/>

    <input type="hidden" th:field="*{viewedAt}"/>

    <div class="form-group">
        <label for="userId">User Name</label>
        <input type="text" id="userId" class="form-control" readonly th:field="*{userId}"/>
    </div>
    <div class="form-group">
        <label for="emailAddress">Email Address</label>
        <input type="email" id="emailAddress" class="form-control" readonly th:field="*{emailAddress}"/>
    </div>
    <div class="form-group">
        <label for="projectsList">Your Projects</label>
        <p>Please use the radio buttons to specify the projects that should either be included or excluded from the WebProtege change history logs dataset.  Remember, only de-identified obfuscated versions of your project change histories will be used for those projects that you do allow us to include.  Further details are available here (opens in a new tab).</p>
        <div class="form-group">
            <button type="button" class="btn btn-sm btn-outline-secondary" onclick="selectAll()">Include All</button>
            <button type="button" class="btn btn-sm btn-outline-secondary" onclick="selectNone()">Exclude All</button>
        </div>
        <table id="projectsList" class="table table-sm">
            <thead class="thead-light">
            <tr>
                <th>Project Name</th>
                <th>Project Id</th>
                <th>Included/Excluded</th>
            </tr>

            </thead>
            <tr th:each="project: *{projects}">
                <td>
                    <a target="_blank"
                       th:href="|https://webprotege.stanford.edu/#projects/${project.projectId}/edit/Classes|"
                       th:text="${project.projectName}"></a>
                    <input type="hidden" th:field="*{projects[__${projectStat.index}__].projectName}"
                           th:value="${project.projectName}">
                </td>
                <td>
                    <span th:text="${project.projectId}"></span>
                    <input type="hidden" th:field="*{projects[__${projectStat.index}__].projectId}"
                           th:value="${project.projectId}">

                    <input type="hidden" th:field="*{projects[__${projectStat.index}__].createdAt}"
                           th:value="${project.createdAt}">

                    <input type="hidden" th:field="*{projects[__${projectStat.index}__].modifiedAt}"
                           th:value="${project.modifiedAt}">


                </td>
                <td>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" data-include type="radio"
                               th:field="*{projects[__${projectStat.index}__].optOut}" value="false">
                        <label class="form-check-label"
                               th:field="*{projects[__${projectStat.index}__].optOut}">Included</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" data-exclude type="radio"
                               th:field="*{projects[__${projectStat.index}__].optOut}" value="true">
                        <label class="form-check-label">Excluded</label>
                    </div>
                </td>
            </tr>
        </table>
    </div>

    <div class="form-group">
        <label for="comments">Reasons for opting out or additional comments (Optional)</label>
        <textarea id="comments" class="form-control" th:field="*{comment}">Comment Text</textarea>
    </div>

    <div class="form-group">
        <input type="submit" value="Save My Inclusion/Exclusion Preferences" class="btn btn-success"/>
    </div>
</form>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/js/bootstrap.min.js"
        integrity="sha384-7aThvCh9TypR7fIc2HV4O/nFMVCBwyIUKL8XCtKE+8xgCgl/PQGuFsvShjr74PBp"
        crossorigin="anonymous"></script>
</body>
</html>